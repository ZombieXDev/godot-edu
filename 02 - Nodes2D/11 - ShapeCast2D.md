<div dir="rtl">


# ما هي `ShapeCast2D`؟

`ShapeCast2D` هي عقدة مشابهة لـ `RayCast2D`، لكنها تستخدم **شكلًا** (Shape) بدلاً من شعاع خطي لفحص التصادمات في 2D.

يعني بدل ما ترسل خطًا مستقيمًا، ترسل **شكل** (مثل مستطيل أو دائرة) يتحرك في اتجاه معين، وتفحص إذا سيصطدم هذا الشكل بأي جسم أثناء حركته.

---

## لماذا نستخدم `ShapeCast2D`؟

* للحصول على فحص تصادم أكثر دقة من `RayCast2D` لأن الفحص يعتمد على شكل وليس خط.
* مفيد لتحديد إذا كان جسم ما يمكنه التحرك في اتجاه معين دون اصطدام.
* يستخدم في الفيزياء للكشف عن التصادمات المستقبلية قبل تنفيذ الحركة.

---

## كيف تعمل؟

* تحدد شكل (Shape) داخل `ShapeCast2D` (مثل مستطيل أو دائرة).
* تحدد اتجاه الحركة وطولها (باستخدام خاصية `cast_to`).
* العقدة تتحقق إذا كان الشكل عند تحركه في ذلك الاتجاه سيتصادم مع جسم ما.

---

## الخصائص المهمة في `ShapeCast2D`

| الخاصية              | النوع               | الوصف                                                       |
| -------------------- | ------------------- | ----------------------------------------------------------- |
| `cast_to`            | Vector2             | نهاية حركة الشكل نسبة لموقع العقدة.                         |
| `enabled`            | bool                | تفعيل أو تعطيل عمل الفحص.                                   |
| `collision_mask`     | int                 | تحديد طبقات الأجسام التي سيتم فحص التصادم معها.             |
| `exclude_parent`     | bool                | تجاهل التصادم مع العقدة الأب.                               |
| `colliding`          | bool (قراءة فقط)    | هل الشكل اصطدم بجسم أثناء الحركة.                           |
| `collision_point`    | Vector2 (قراءة فقط) | نقطة التصادم المحتملة في العالم.                            |
| `collision_normal`   | Vector2 (قراءة فقط) | اتجاه السطح عند نقطة الاصطدام.                              |
| `collision_collider` | Object (قراءة فقط)  | الجسم الذي تم الاصطدام به.                                  |
| `shape`              | Shape2D             | الشكل المستخدم لفحص التصادم (مستطيل، دائرة، إلخ).           |
| `margin`             | float               | مقدار التوسيع أو التقلص في الفحص (لتجنب التصادمات الصغيرة). |

---

## الدوال المهمة في `ShapeCast2D`

| الدالة                   | الوصف                                                       |
| ------------------------ | ----------------------------------------------------------- |
| `is_colliding()`         | تعيد `true` إذا كان الشكل سيصطدم بجسم ما في الاتجاه المحدد. |
| `get_collider()`         | تعيد الجسم الذي سيتصادم معه الشكل.                          |
| `get_collision_point()`  | تعيد نقطة الاصطدام المتوقعة.                                |
| `get_collision_normal()` | تعيد الاتجاه الطبيعي للسطح عند نقطة الاصطدام.               |
| `force_update_motion()`  | تجبر العقدة على تحديث حالة التصادم فورًا.                   |

---

## مثال عملي بسيط
<div dir=ltr>

```gdscript
func _physics_process(delta):
    if $ShapeCast2D.is_colliding():
        var collider = $ShapeCast2D.get_collider()
        print("مواجهة عائق: ", collider.name)
    else:
        print("المسار خالي")
```

---

<div dir=rtl>


## ملاحظات

* يجب تعيين شكل داخل `ShapeCast2D` ليعمل (مثلاً: `RectangleShape2D` أو `CircleShape2D`).
* `ShapeCast2D` مفيد لفحص التصادمات المعقدة أو للكائنات الأكبر التي لا يمكن تمثيلها بشعاع فقط.
* مفيد في الألعاب التي تحتاج لحركة سلسة وتجنب الاصطدامات.

---

</div>
